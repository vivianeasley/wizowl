import"./normalize-dc93543e.js";const n=document.querySelectorAll(".bubbles"),h=document.querySelector("#source"),r=document.querySelector("#canvas"),a=r.getContext("2d");let w;const g=[{text:"Good day students of the magical arts. For many of you this is your first class at Wizaduries Wizardy Wizard College of the Wizarding. Letâ€™s dive right into the lessons shall we?",bubble:n[2],speakArr:[2,3,6,4,5,7,9],endOn:0,row:0,sound:"ZYXUTV"},{text:"But before any of you pick up your wands we need to go over something very important. Wand safety! Wands are incredibly dangerous tools of the arcane arts and not toys. Remember these very important rules whenever you use them:",bubble:n[2],speakArr:[2,3,6,4,5,7,9],endOn:0,row:0,sound:"acXUeTVbf"},{text:"Do not point the wand at its reflection in a mirror. The wand will explode.",bubble:n[0],speakArr:[2,3,6,4,5,7,9],endOn:0,row:0,sound:"ZYXUTV"},{text:"Do not grind the wand into a fine powder and then consume it to see through time and space. You will explode.",bubble:n[1],speakArr:[2,3,6,4,5,7,9],endOn:0,row:0,sound:"hgklrsm"},{text:"Do not use your wand to solve logical paradoxes. The wand will explode.",bubble:n[0],speakArr:[2,3,6,4,5,7,9],endOn:0,row:0,sound:"acXUeTVbf"},{text:"And definitely, under no circumstances, look down the tip of your wand to see what the color of magic is.",bubble:n[1],speakArr:[2,3,6,4,5,7,9],endOn:11,row:0,sound:"VVUXcZaXUTfYe"},{text:"",bubble:void 0,speakArr:void 0,endOn:0,row:1,sound:"acXUeTVbf"},{text:"Oh dear. I've done it again. I've accidently turned myself into an owl.",bubble:n[0],speakArr:[1,1,1,1,1,1,1],endOn:1,row:1,sound:"hgklrsm"},{text:"Down here! On the floor.",bubble:n[0],speakArr:[1,1,1,1,1,1,1],endOn:1,row:1,sound:"acXUeTVbf"},{text:"Well, I'll need a little help to transform back into my human form.",bubble:n[0],speakArr:[2,2,2,2,2,2,2],endOn:2,row:1,sound:"VVUXcZaXUTfYe"},{text:"Please use circular motions to push me back and forth. I'll need you to do it at a specific speed to be successful. Watch my eyes to know if you are moving me at the correct speed. Please start now!",bubble:n[2],speakArr:[3,3,3,3,3,3,3],endOn:3,row:1,sound:"acXUeTVbf"},{onFinish:()=>location.href="./game/"}],x=[{text:"Well, that didn't work. Try watching my owl eyes and changing your speed if I look angry. Let's try again!",bubble:n[1],speakArr:[3,3,3,3,3,3,3],endOn:3,row:1,sound:"acXUeTVbf"},{onFinish:()=>location.href="./game/"}],k=[{text:"Huzzah! You have succeeded! Now we can return to your wizarding studies!",bubble:n[1],speakArr:[4,5,6,7,8,9,6],endOn:4,row:1,sound:"VVUXcZaXUTfYe"},{onFinish:()=>location.href="./"}],A=new URLSearchParams(window.location.search),p=A.get("type");let b;p==="lose"?b=x:p==="win"?b=k:b=g;function m(){w===void 0?w=0:w++;const e=b[w];if(e.onFinish){e.onFinish();return}n[0].style.display="none",n[1].style.display="none",n[2].style.display="none",e.bubble&&(e.bubble.style.display="block",e.bubble.querySelector(".bubble-text").textContent=e.text),O(e.speakArr,e.endOn,e.sound,e.row)}function O(e,s,u,o){if(!e){a.drawImage(h,s*140,192*o,140,192,0,0,window.innerWidth,window.innerHeight);return}let i=0;d(),v(V(u),.3);function d(){if(!e[i]){a.drawImage(h,s*140,192*o,140,192,0,0,window.innerWidth,window.innerHeight);return}a.drawImage(h,e[i]*140,192*o,140,192,0,0,window.innerWidth,window.innerHeight),setTimeout(()=>{i++,d()},200)}}function T(){r.addEventListener("touchend",m),r.addEventListener("rotate",y),r.addEventListener("resize",y),setTimeout(()=>{y(),a.drawImage(h,0,0,140,192,0,0,window.innerWidth,window.innerHeight),m()},1e3)}document.addEventListener("DOMContentLoaded",T);function y(){a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,r.style.width=window.innerWidth+"px",r.style.height=window.innerHeight+"px"}function v(e,s,u){let o,i={5:.4,4:.3,3:.2,2:.1,1:.05},d=Object.keys(i);d.push("-"),window.AudioContext=window.AudioContext||window.webkitAudioContext;let f=new AudioContext,c=f.createGain();for(let t=0;t<e.length;t++){o=isNaN(e[t+1])?u||.1:i[e[t+1]];let l=f.createOscillator();e[t=+t]&&!d.includes(e[t])&&(l.connect(c),c.connect(f.destination),l.start(t*o+.3),l.frequency.setValueAtTime(440*1.06**(-105+e.charCodeAt(t)),t*o+.3),l.type=s||"sine",c.gain.setValueAtTime(.5,t*o+.3),c.gain.setTargetAtTime(.001,t*o+.3+.1,.05),l.stop(t*o+.3+o-.01))}}function V(e){return e.split("").sort(function(){return .5-Math.random()}).join("")}
