import"./normalize-dc93543e.js";let L;const k=document.querySelector(".owl-head"),l=document.querySelector("#canvas"),I=document.querySelector(".gameplay-text-node"),z=document.querySelector(".score-js"),D=document.querySelector(".level-js"),W=document.getElementById("source"),v=l.getContext("2d"),$=["Perfect!","Like that!","keep going!","Hoot!"],F=["Screech!","No!","That's wrong!","Should I try?"];let a=1,g=0,q=[],A=0,T=0,t=0,p=0,h=[0],u=0,w=0,f=!1,M="left",E="right",S=0,m=0,x=3,d={swipeSize:"large",swipeSpeedTarget:2,force:1,isTouching:!1};const i={swipeSize:"large",swipeSpeedTarget:2,force:1,isTouching:!1};function j(){h.length>4&&h.shift(),h.push(S);const e=h.reduce((n,o)=>n+o)/h.length;if(i.swipeSpeedTarget+1<e||i.swipeSpeedTarget-1>e?t<4&&t++:t!==0&&t--,a>1&&(i.force==="heavy"&&w<.5?t!==0&&t--:i.force==="heavy"&&w>=.5&&t<4&&t++,i.force==="light"&&w>=.5?t!==0&&t--:i.force==="light"&&w<.5&&t<4&&t++),a>1&&(i.swipeSize==="large"&&p<4?t<4&&t++:i.swipeSize==="large"&&p>=4&&t!==0&&t--,i.swipeSize==="small"&&p>=4?t<4&&t++:i.swipeSize==="small"&&p<4&&t!==0&&t--),a>2&&(i.isTouching===!0&&f===!1||i.isTouching===!1&&f===!0?t<4&&t++:(i.isTouching===!1&&f===!1||i.isTouching===!0&&f===!0)&&t!==0&&t--),k.setAttribute("class",`owl-head img${t<1?1:t}`),u%2===0&&(t>3&&T++,t<4&&(T=0)),u%6===0&&(t<=0&&(g+=10,z.textContent=g,s(H($),"#00ff19")),t===2&&(g+=6,z.textContent=g),t>=4&&(g-=4,z.textContent=g,s(H(F),"#ff0000"))),T>8&&(location.href="../story/?type=lose",clearInterval(L)),u>240&&(a++,D.textContent=a,a>4?(location.href="../story/?type=win",V(),clearInterval(L)):(s(`Level ${a}!`,"#00fff5"),a===2&&s("Pressure Added","#00fff5"),a===3&&s("Circle Size Added","#00fff5"),a===4&&s("Pauses Added","#00fff5"),u=0)),S++,u++,u%50===0){const n=[0,0,1,1,1,1,1,1,2,2,2,2,3];d={...i},i.swipeSize=Math.random()>.5?"small":"large",i.swipeSpeedTarget=n[Math.floor(Math.random()*n.length)],i.force=Math.random()>.2?"heavy":"light",i.isTouching=Math.random()>.2,i.swipeSpeedTarget!==d.swipeSpeedTarget&&(i.swipeSpeedTarget<d.swipeSpeedTarget&&s("Slower!"),i.swipeSpeedTarget>d.swipeSpeedTarget&&s("Faster!")),i.force!==d.force&&a>1&&(i.force==="light"&&s("Lighter touch!"),i.force==="heavy"&&s("Heavier touch!")),i.swipeSize!==d.swipeSize&&a>2&&(i.swipeSize==="small"&&s("Smaller circles!"),i.swipeSize==="large"&&s("Larger circles!")),i.isTouching!==d.isTouching&&a>3&&(i.isTouching===!0&&s("Start!"),i.isTouching===!1&&s("Stop!"))}}function b(){l.addEventListener("touchstart",O),l.addEventListener("touchend",B),l.addEventListener("touchmove",X),l.addEventListener("rotate",C),l.addEventListener("resize",C),setTimeout(()=>{C(),v.drawImage(W,3*140,0,140,192,0,110,window.innerWidth,window.innerHeight)},1e3),L=setInterval(j,250),window.requestAnimationFrame(P)}document.addEventListener("DOMContentLoaded",b);function O(e){e.preventDefault(),f=!0,N(e.changedTouches)}function X(e){e.preventDefault(),N(e.changedTouches)}function B(e){e.preventDefault(),f=!1,N(e.changedTouches)}function N(e){if(f===!1)return;const n=Object.keys(e)[0];if(!e[n])return;w=e[n].force,A=e[n].pageX,e[n].pageX;let o=0;for(;A>q[o];)o++;if(x!==o){const c=x-o<0?"left":"right";M!==c&&(M=E,p=m!==1?m:p,m=0,S=0),E=c,m++,x=o}v.drawImage(W,o*140,0,140,192,0,110,window.innerWidth,window.innerHeight)}function C(){v.canvas.width=window.innerWidth,v.canvas.height=window.innerHeight,l.style.width=window.innerWidth+"px",l.style.height=window.innerHeight+"px",R()}function R(){q=[];const e=window.innerWidth/7;for(let n=0;n<7;n++)q.push(n*e)}function s(e,n){const o=Math.random()*100-100,c=window.innerWidth/2+o,y=window.innerHeight/2+o,r=document.createElement("div");r.classList.add("text"),r.textContent=e,r.style.opacity=1,n?r.style.color=n:r.style.color="#f1f1f1",I.appendChild(r),r.style.transform=`translate(${c}px, ${y}px)`,r.dataset.y=y,r.dataset.x=c,I.querySelectorAll(".text").length===1&&window.requestAnimationFrame(P)}function P(){const e=I.querySelectorAll(".text");for(let n=0;n<e.length;n++)if(e[n].style.opacity<=0)e[n].remove();else{const o=parseInt(e[n].dataset.y,10),c=parseInt(e[n].dataset.x,10),y=e[n].style.opacity;e[n].style.opacity=y-.004,e[n].style.transform=`translate(${c}px, ${o+y*100}px)`}e.length>0&&window.requestAnimationFrame(P)}function V(){A=0,T=0,t=0,p=0,h=[0],u=0,w=0,f=!1,M="left",E="right",S=0,m=0,x=3}function H(e){return e[Math.floor(Math.random()*e.length)]}
